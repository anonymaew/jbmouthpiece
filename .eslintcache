[{"D:\\web\\jbmouthpiece\\src\\index.js":"1","D:\\web\\jbmouthpiece\\src\\App.js":"2","D:\\web\\jbmouthpiece\\src\\Catalog.js":"3","D:\\web\\jbmouthpiece\\src\\Navbar.js":"4","D:\\web\\jbmouthpiece\\src\\ProductCard.js":"5","D:\\web\\jbmouthpiece\\src\\Tag.js":"6"},{"size":205,"mtime":1610301983500,"results":"7","hashOfConfig":"8"},{"size":919,"mtime":1610301983496,"results":"9","hashOfConfig":"8"},{"size":8255,"mtime":1610560314651,"results":"10","hashOfConfig":"8"},{"size":1017,"mtime":1610310266029,"results":"11","hashOfConfig":"8"},{"size":2303,"mtime":1610560363391,"results":"12","hashOfConfig":"8"},{"size":258,"mtime":1610312732200,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1ssyds2",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21","usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26","usedDeprecatedRules":"16"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},"D:\\web\\jbmouthpiece\\src\\index.js",[],["30","31"],"D:\\web\\jbmouthpiece\\src\\App.js",[],"D:\\web\\jbmouthpiece\\src\\Catalog.js",["32","33","34","35","36","37","38","39"],"import React,{useState,useEffect} from 'react'\r\n\r\nimport ProductCard from './ProductCard'\r\nimport Tag from './Tag'\r\n\r\nexport default function Catalog({dtb,user}) {\r\n    \r\n    const [pdl,setpd]=useState([])\r\n    const [tgl,settg]=useState([])\r\n    const [ssmt,setssmt]=useState([\"az\",[],false])\r\n    const [ssw,setssw]=useState(-216)\r\n  \r\n    useEffect(()=>{\r\n      dtb.collection(\"catalog\").get().then((data)=>{\r\n        let lis=[]\r\n        data.forEach((i)=>{\r\n          if(i.data().name!==\"null\") lis.push({id:i.id,...i.data(),visible:true})\r\n        })\r\n        setpd(()=>lis)\r\n      })\r\n      .catch((e)=>{alert(e.message); setpd(()=>[])})\r\n  \r\n      \r\n      dtb.collection(\"tag\").get().then((data)=>{\r\n        let lis=[]\r\n        data.forEach((i)=>{\r\n          if(i.data().name!==\"null\") lis.push({id:i.id,...i.data()})\r\n        })\r\n        settg(()=>lis)\r\n      })\r\n      .catch((e)=>{alert(e.message); settg(()=>[])})\r\n    },[])\r\n  \r\n    useEffect(()=>{\r\n      console.log(pdl)\r\n    },[pdl])\r\n\r\n    useEffect(()=>{\r\n      let sort=ssmt[0],sieve=ssmt[1],seeoos=!ssmt[2];\r\n      console.log(ssmt)\r\n      setpd((l)=>{\r\n        let li=[]\r\n        for(let i of l){\r\n          i.visible=!i.oos || seeoos;\r\n          for(let ti of sieve) if(!i.tag.includes(ti)){ i.visible=false; break; }\r\n          li.push(i)\r\n        }\r\n        \r\n        li.sort((a,b)=>{\r\n          let ap=(a.sale===\"\")?a.price:a.sale,bp=(b.sale===\"\")?b.price:b.sale;\r\n          if(sort===\"pP\") return ap-bp;\r\n          else if(sort===\"Pp\") return bp-ap;\r\n          else if(sort===\"az\") return (a.name<b.name)?-1:1;\r\n          else if(sort===\"za\") return (a.name>b.name)?-1:1;\r\n        })\r\n\r\n        return li;\r\n      })\r\n    },[ssmt])\r\n  \r\n    function addCatalog(e){\r\n      let newOb={\r\n        name:e.target.name.value,\r\n        price:e.target.price.value,\r\n        sale:e.target.sale.value,\r\n        oos:false,\r\n        tag:[]\r\n      }\r\n      dtb.collection(\"catalog\").add(newOb).then((ref)=>{\r\n        newOb.id=ref.id; newOb.visible=true;\r\n        setpd((l)=>{return [...l,newOb]})\r\n        console.log(\"save at \"+ref.id);\r\n      })\r\n      .catch((e)=>alert(e.message))\r\n    }\r\n  \r\n    function editCatalog(e){\r\n      let lis=[]\r\n      for(let ti of tgl) if(e.target[ti.id].checked) lis.push(ti.id)\r\n      let newOb={\r\n        id:e.target.id.value,\r\n        name:e.target.name.value,\r\n        price:e.target.price.value,\r\n        sale:e.target.sale.value,\r\n        oos:e.target.oos.checked,\r\n        tag:lis\r\n      }\r\n      dtb.collection(\"catalog\").doc(e.target.id.value).update(newOb)\r\n      .then(()=>{\r\n        setpd((l)=>{\r\n          let li=[...l]\r\n          for(let i=0;i<li.length;i++) if(li[i].id===e.target.id.value) li[i]={...newOb,visible:e.target.visible.checked}\r\n          return li\r\n        })\r\n        console.log(\"updated\");\r\n      })\r\n      .catch((e)=>alert(e.message))\r\n    }\r\n  \r\n    function deleteCatalog(id){\r\n      dtb.collection(\"catalog\").doc(id).delete()\r\n      .then(()=>{\r\n        setpd((l)=>{\r\n          let li=[...l],iin;\r\n          for(let i=0;i<li.length;i++) if(li[i].id===id) iin=i;\r\n          li.splice(iin,1)\r\n          return li\r\n        })\r\n        console.log(\"deleted\");\r\n      })\r\n    }\r\n  \r\n    function addTag(e){\r\n      let newOb={\r\n        name:e.target.name.value,\r\n        description:e.target.description.value,\r\n        color:e.target.color.value\r\n      }\r\n      dtb.collection(\"tag\").add(newOb).then((ref)=>{\r\n        newOb.id=ref.id;\r\n        settg((l)=>{return [...l,newOb]})\r\n        console.log(\"save at \"+ref.id);\r\n      })\r\n      .catch((e)=>alert(e.message))\r\n    }\r\n  \r\n    function editTag(e){\r\n      let newOb={\r\n        id:e.target.id.value,\r\n        name:e.target.name.value,\r\n        description:e.target.description.value,\r\n        color:e.target.color.value\r\n      }\r\n      dtb.collection(\"tag\").doc(e.target.id.value).update(newOb)\r\n      .then(()=>{\r\n        settg((l)=>{\r\n          let li=[...l]\r\n          for(let i=0;i<li.length;i++) if(li[i].id===e.target.id.value) li[i]=newOb\r\n          return li\r\n        })\r\n        console.log(\"updated\");\r\n      })\r\n      .catch((e)=>alert(e.message))\r\n    }\r\n  \r\n    function deleteTag(id){\r\n      dtb.collection(\"tag\").doc(id).delete()\r\n      .then(()=>{\r\n        settg((l)=>{\r\n          let li=[...l],iin;\r\n          for(let i=0;i<li.length;i++) if(li[i].id===id) iin=i;\r\n          li.splice(iin,1)\r\n          return li\r\n        })\r\n        console.log(\"deleted\");\r\n      })\r\n    }\r\n  \r\n    return (\r\n      <>\r\n        <div id=\"sortsieve\" style={{left:ssw+\"px\"}}>\r\n          <div>\r\n            <a href=\"javascript:void(0)\" class=\"close\" onClick={()=>setssw(-216)}>X</a>\r\n          </div>\r\n          <p>เรียงสินค้าจาก:</p>\r\n          <select onChange={(e)=>setssmt(i=>{\r\n            let j=[...i]\r\n            j[0]=e.target.value;\r\n            return j;\r\n          })}>\r\n            <option value=\"az\" defaultValue>ตัวอักษร a-z</option>\r\n            <option value=\"za\">ตัวอักษร z-a</option>\r\n            <option value=\"pP\">ราคาน้อยไปมาก</option>\r\n            <option value=\"Pp\">ราคามากไปน้อย</option>\r\n          </select><br></br><br></br>\r\n          <p>ตัวกรอง</p>\r\n          <input onChange={(e)=>setssmt(i=>{\r\n            let j=[...i]\r\n            j[2]=e.target.checked;\r\n            return j;\r\n          })} type=\"checkbox\" name=\"seeoos\"></input>\r\n          <label htmlFor=\"seeoos\">ไม่เลือกสินค้าหมด</label>\r\n          {tgl.map(i=>{\r\n            return(\r\n              <div key={i.id}>\r\n                <input onChange={(e)=>{\r\n                  if(e.target.checked) setssmt((ossmt)=>{\r\n                    let j=[...ossmt]\r\n                    j[1]=[...j[1],i.id]\r\n                    return j;\r\n                  })\r\n                  else  setssmt((ossmt)=>{\r\n                    let j=[];\r\n                    for(let nt of ossmt[1]) if(nt!==i.id) j.push(nt)\r\n                    return [ossmt[0],j,ossmt[2]]\r\n                  })\r\n                }} type=\"checkbox\" name={i.id}></input>\r\n                <Tag data={i}/>\r\n               </div>\r\n            )\r\n          })}\r\n        </div><br></br>\r\n      <div>\r\n        <a href=\"javascript:void(0)\" class=\"close\" onClick={()=>setssw(0)}>{'>>'} ตัวเลือก</a>\r\n      </div>\r\n        <div id=\"catalog\">\r\n          {pdl.map(i=>{\r\n            if(i.visible) return <ProductCard key={i.id} user={user} data={i} tgl={tgl} save={editCatalog} del={deleteCatalog}/>\r\n          })}\r\n        </div>\r\n        <div id=\"tag\">\r\n          {\r\n            tgl.map(i=>{\r\n              if(user!==\"\") return (\r\n              <div key={i.id}>\r\n                <Tag data={i}/>\r\n                <form onSubmit={(e)=>{e.preventDefault();editTag(e)}}>\r\n                  <input type=\"text\" name=\"id\" value={i.id} style={{display:\"none\"}} readOnly></input>\r\n                  <input type=\"text\" name=\"name\" defaultValue={i.name}></input>\r\n                  <input type=\"text\" name=\"description\" defaultValue={i.description}></input>\r\n                  <input type=\"color\" name=\"color\" defaultValue={i.color}></input>\r\n                  <button>save</button>\r\n                  <button type=\"button\" onClick={()=>deleteTag(i.id)}>delete</button>\r\n                </form>\r\n              </div>\r\n              )\r\n            })\r\n          }\r\n        </div>\r\n        {\r\n          (user!==\"\") ? \r\n            <>\r\n              <form onSubmit={(e)=>{e.preventDefault();addCatalog(e);}}>\r\n                <input type=\"text\" name=\"name\" placeholder=\"name\"></input>\r\n                <input type=\"number\" name=\"price\" placeholder=\"price\"></input>\r\n                <input type=\"number\" name=\"sale\" placeholder=\"sale price(optional)\"></input>\r\n                <button>add</button>\r\n              </form>\r\n              <form onSubmit={(e)=>{e.preventDefault();addTag(e);}}>\r\n                <input type=\"text\" name=\"name\"></input>\r\n                <input type=\"text\" name=\"description\"></input>\r\n                <input type=\"color\" name=\"color\"></input>\r\n                <button>add</button>\r\n              </form>\r\n            </> : <></>\r\n        }\r\n      </>\r\n    );\r\n}\r\n","D:\\web\\jbmouthpiece\\src\\Navbar.js",[],"D:\\web\\jbmouthpiece\\src\\ProductCard.js",["40"],"import React from 'react'\r\n\r\nimport Tag from './Tag'\r\n\r\nexport default function ProductCard({data,user,tgl,save,del}) {\r\n    return (\r\n        <div className=\"productCard\" key={data.id}>\r\n            <p className=\"productName\">{data.name}</p>\r\n            <span className=\"productPrice\" style={(data.sale===\"\" && !data.oos)?{}:{textDecoration:\"line-through\"}}>{data.price+\" บาท\"}</span>\r\n            {(data.sale===\"\" || data.oos)?<></>:<span className=\"productSale\">{data.sale+\" บาท (\"+((+data.sale-data.price)*100/+data.price).toFixed()+\"%)\"}</span>}\r\n            {(data.oos)?<span className=\"productOos\">{(data.oos)?\"สินค้าหมด\":\"\"}</span>:<></>}\r\n            <br></br>\r\n            {data.tag.map(ti=>{\r\n              for(let li=0;li<tgl.length;li++) if(ti===tgl[li].id)\r\n              return <Tag key={ti} data={tgl[li]}/>\r\n            })}\r\n            {\r\n              (user!==\"\") ?\r\n                <form onSubmit={(e)=>{e.preventDefault();save(e);}}>\r\n                  <input type=\"text\" name=\"id\" value={data.id} style={{display:\"none\"}} readOnly></input>\r\n                  <input type=\"checkbox\" name=\"visible\" checked={data.visible} style={{display:\"none\"}} readOnly></input>\r\n                  <input type=\"text\" name=\"name\" defaultValue={data.name}></input>\r\n                  <input type=\"number\" name=\"price\" defaultValue={data.price}></input>\r\n                  <input type=\"number\" name=\"sale\" defaultValue={data.sale}></input><br></br>\r\n                  <label htmlFor=\"oos\">สินค้าหมด</label>\r\n                  <input type=\"checkbox\" name=\"oos\" defaultChecked={data.oos}></input><br></br>\r\n                  {tgl.map(ti=>{\r\n                      return(\r\n                          <div key={ti.id}>\r\n                              <input key={ti.id} type=\"checkbox\" name={ti.id} defaultChecked={data.tag.includes(ti.id)}></input>\r\n                              <Tag data={ti}/><br></br>\r\n                          </div>\r\n                      )\r\n                  })}\r\n                  <br></br>\r\n                  <input type=\"submit\" value=\"save\"></input>\r\n                  <button type=\"button\" onClick={()=>del(data.id)}>del</button>\r\n                </form>\r\n                : <></>\r\n            }\r\n        </div>\r\n        )\r\n}\r\n","D:\\web\\jbmouthpiece\\src\\Tag.js",[],["41","42"],{"ruleId":"43","replacedBy":"44"},{"ruleId":"45","replacedBy":"46"},{"ruleId":"47","severity":1,"message":"48","line":32,"column":7,"nodeType":"49","endLine":32,"endColumn":9,"suggestions":"50"},{"ruleId":"51","severity":1,"message":"52","line":49,"column":22,"nodeType":"53","messageId":"54","endLine":49,"endColumn":24},{"ruleId":"55","severity":1,"message":"56","line":163,"column":13,"nodeType":"57","endLine":163,"endColumn":83},{"ruleId":"58","severity":1,"message":"59","line":163,"column":21,"nodeType":"60","messageId":"61","endLine":163,"endColumn":41},{"ruleId":"55","severity":1,"message":"56","line":204,"column":9,"nodeType":"57","endLine":204,"endColumn":76},{"ruleId":"58","severity":1,"message":"59","line":204,"column":17,"nodeType":"60","messageId":"61","endLine":204,"endColumn":37},{"ruleId":"51","severity":1,"message":"62","line":207,"column":21,"nodeType":"53","messageId":"54","endLine":207,"endColumn":23},{"ruleId":"51","severity":1,"message":"62","line":213,"column":22,"nodeType":"53","messageId":"54","endLine":213,"endColumn":24},{"ruleId":"51","severity":1,"message":"62","line":13,"column":29,"nodeType":"53","messageId":"54","endLine":13,"endColumn":31},{"ruleId":"43","replacedBy":"63"},{"ruleId":"45","replacedBy":"64"},"no-native-reassign",["65"],"no-negated-in-lhs",["66"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dtb'. Either include it or remove the dependency array.","ArrayExpression",["67"],"array-callback-return","Array.prototype.sort() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","no-script-url","Script URL is a form of eval.","Literal","unexpectedScriptURL","Array.prototype.map() expects a value to be returned at the end of arrow function.",["65"],["66"],"no-global-assign","no-unsafe-negation",{"desc":"68","fix":"69"},"Update the dependencies array to be: [dtb]",{"range":"70","text":"71"},[932,934],"[dtb]"]